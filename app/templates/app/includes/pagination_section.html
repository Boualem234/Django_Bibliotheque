{% if range_pages and range_pages.stop > 2 %}
<div class="d-flex flex-column align-items-center mt-5 mb-4">
  <div class="pagination-info mb-3">
    <span class="badge bg-primary fs-6 px-3 py-2">
      <i class="fas fa-book-open me-2"></i>
      {% with count=page_items.paginator.count %}
      {{ count }} résultat{{ count|pluralize }} trouvé{{ count|pluralize }}
      {% endwith %}
      {% if page_items.paginator.num_pages > 1 %}
      <span class="ms-2 text-white-50">
        • Page {{ page_items.number }} sur {{ page_items.paginator.num_pages }}
      </span>
      {% endif %}
    </span>
  </div>

  <nav aria-label="Navigation des pages" class="pagination-nav">
    <ul class="pagination pagination-lg shadow-sm border-0 mb-0">
      
      {% if page_items.has_previous and page_items.number > 2 %}
      <li class="page-item">
        <a href="?page=1" class="page-link border-0 text-primary" 
           title="Première page" data-bs-toggle="tooltip">
          <i class="fas fa-angle-double-left"></i>
        </a>
      </li>
      {% endif %}

      <!-- Bouton Précédent -->
      {% if page_items.has_previous %}
      <li class="page-item">
        <a href="?page={{ page_items.previous_page_number }}" 
           class="page-link border-0 text-primary px-4" 
           title="Page précédente" data-bs-toggle="tooltip">
          <i class="fas fa-chevron-left me-2"></i>Précédent
        </a>
      </li>
      {% else %}
      <li class="page-item disabled">
        <span class="page-link border-0 bg-light text-muted px-4">
          <i class="fas fa-chevron-left me-2"></i>Précédent
        </span>
      </li>
      {% endif %}

      <!-- numéros de pages -->
      {% for i in range_pages %}
        {% if page_items.number == i %}
        <li class="page-item active">
          <span class="page-link bg-primary border-primary shadow-sm">
            <strong>{{ i }}</strong>
          </span>
        </li>
        {% else %}
        <li class="page-item">
          <a class="page-link border-0 text-primary hover-bg-light" 
             href="?page={{ i }}" 
             title="Aller à la page {{ i }}" 
             data-bs-toggle="tooltip">
            {{ i }}
          </a>
        </li>
        {% endif %}
      {% endfor %}

      <!-- Bouton Suivant -->
      {% if page_items.has_next %}
      <li class="page-item">
        <a href="?page={{ page_items.next_page_number }}" 
           class="page-link border-0 text-primary px-4" 
           title="Page suivante" data-bs-toggle="tooltip">
          Suivant<i class="fas fa-chevron-right ms-2"></i>
        </a>
      </li>
      {% else %}
      <li class="page-item disabled">
        <span class="page-link border-0 bg-light text-muted px-4">
          Suivant<i class="fas fa-chevron-right ms-2"></i>
        </span>
      </li>
      {% endif %}

      {% if page_items.has_next and page_items.number < page_items.paginator.num_pages|add:"-1" %}
      <li class="page-item">
        <a href="?page={{ page_items.paginator.num_pages }}" 
           class="page-link border-0 text-primary" 
           title="Dernière page" data-bs-toggle="tooltip">
          <i class="fas fa-angle-double-right"></i>
        </a>
      </li>
      {% endif %}

    </ul>
  </nav>

  {% if page_items.paginator.num_pages > 1 %}
  <div class="pagination-details mt-3">
    <small class="text-muted d-flex align-items-center">
      <i class="fas fa-info-circle me-2"></i>
      Affichage 
      <strong class="mx-1">{{ page_items.start_index }} - {{ page_items.end_index }}</strong>
      sur 
      <strong class="ms-1">{{ page_items.paginator.count }}</strong>
    </small>
  </div>
  {% endif %}
</div>

<style>
.pagination-nav .page-link {
  transition: all 0.3s ease;
  font-weight: 500;
  min-width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 2px;
  border-radius: 8px !important;
}

.pagination-nav .page-link:hover {
  background-color: var(--bs-primary) !important;
  color: white !important;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
}

.pagination-nav .page-item.active .page-link {
  background: linear-gradient(135deg, #2196f3, #1976d2);
  border: none;
  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.4);
  transform: scale(1.1);
}

.pagination-nav .page-item.disabled .page-link {
  background-color: #f8f9fa;
  border: none;
  opacity: 0.6;
}

.pagination-info .badge {
  border-radius: 25px;
  font-weight: 500;
  letter-spacing: 0.5px;
}

.pagination-details {
  padding: 12px 20px;
  background: linear-gradient(135deg, #f8f9fa, #e9ecef);
  border-radius: 20px;
  border: 1px solid #dee2e6;
}

@media (max-width: 768px) {
  .pagination-nav .page-link {
    min-width: 40px;
    height: 40px;
    font-size: 0.9rem;
  }
  
  .pagination-nav .page-link:not(.active) span {
    display: none;
  }
  
  .pagination-info .badge {
    font-size: 0.8rem;
  }
}

/* Animation au chargement */
.pagination-nav {
  animation: fadeInUp 0.5s ease-out;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
</style>

<!-- Script pour activer les tooltips Bootstrap -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
  var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
    return new bootstrap.Tooltip(tooltipTriggerEl);
  });
});
</script>
{% else %}
<!-- affichage quand il n'y a qu'une seule page -->
<div class="d-flex justify-content-center mt-4">
  <div class="pagination-info">
    <span class="badge bg-success fs-6 px-3 py-2">
      <i class="fas fa-check-circle me-2"></i>
      {% with count=page_items.paginator.count %}
      {{ count }} résultat{{ count|pluralize }} trouvé{{ count|pluralize }}
      {% endwith %}
    </span>
  </div>
</div>
{% endif %}